{
	"information_for_contributors": [
		"emdepub.org"
	],
	"version": "emdepub.org",
	"scopeName": "source.toml",
	"name": "TOML",
	"fileTypes": [
		"toml"
	],
	"patterns": [
		{
			"include": "#comment-line"
		},
		{
			"include": "#key-equals-value"
		}
	],
	"repository": {
		"comment": {
			"match": "(#)\\s+(.*)$",
			"captures": {
				"1": {
					"name": "punctuation.definition.comment.toml"
				},
				"2": {
					"name": "comment.toml"
				}
			}
		},
		
		"line-key-equals-value1": {
			"begin": "^\\s*?",
			"end": "\\s*?$",
			"patterns": [
				{
					"include": "#key-equals-value"
				}	
			]
		},
		"key-equals-value": {
			"begin": "^\\s*?(.*?)\\s*?(=)",
			"beginCaptures": {
				"1": {
					"patterns": [
						{
							"include": "#key"
						}
					]
				},
				"2": {
					"name": "punctuation.equals.toml"
				}
			},
			"end": "$",
			"patterns": [
				{
					"include": "#values"
				},
				{
					"include": "#comment"
				}	
			]
		},
		
		"values": {
			"patterns": [
				{
					"include": "#value"
				},
				{
					"include": "#value-inline-table"
				},
				{
					"include": "#value-string-triple-single-quote"
				}	
			]
		},

		"key": {
			"match": "^(?:(.+)(\\.\\s*?)(\")(.+)(\"\\s*?$))|(?:(.+)(\\.\\s*?)(')(.+)('\\s*?$))|(?:(.+)(\\.\\s*?)([A-Za-z0-9_-]+\\s*?$))|(?:(\")(.+)(\"\\s*?$))|(?:(')(.+)('\\s*?$))|([A-Za-z0-9_-]+\\s*?$)",
			"captures": {
				"1": {
					"patterns": [
						{
							"include": "#key"
						}	
					]
				},
				"2": {
					"name": "punctuation.equals.toml"
				},
				"3": {
					"name": "green1"
				},
				"4": {
					"name": "red2"
				},
				"5": {
					"name": "green2"
				},
				"6": {
					"patterns": [
						{
							"include": "#key"
						}	
					]
				},
				"7": {
					"name": "punctuation.equals.toml"
				},
				"8": {
					"name": "green1"
				},
				"9": {
					"name": "red2"
				},
				"10": {
					"name": "green2"
				},
				"11": {
					"patterns": [
						{
							"include": "#key"
						}	
					]
				},
				"12": {
					"name": "punctuation.equals.toml"
				},
				"13": {
					"name": "red2"
				},
				"14": {
					"name": "green1"
				},
				"15": {
					"name": "red2"
				},
				"16": {
					"name": "green2"
				},
				"17": {
					"name": "green1"
				},
				"18": {
					"name": "red2"
				},
				"19": {
					"name": "green2"
				},
				"20": {
					"name": "red2"
				}
			}
		},
		
		"value": {
			"match": "[0-9]",
			"name": "blue1"
		},

		"value-inline-table": {
			"begin": "(?<!^)\\s*(\\{)(?!\\s*$)",
			"beginCaptures": {
				"1": {
					"name": "green1"
				}
			},
			"end": "(?<!^)\\s*(\\})",
			"endCaptures": {
				"1": {
					"name": "green2"
				}
			},
			"patterns": [
				{
					"include": "#inline-table-key-equals-value"
				}	
			]
		},
		
		"inline-table-key-equals-value": {
			"begin": "\\s*?(.*?)\\s*?(=)(?!\\s*$)",
			"beginCaptures": {
				"1": {
					"patterns": [
						{
							"include": "#key"
						}
					]
				},
				"2": {
					"name": "punctuation.equals.toml"
				}
			},
			"end": "((?<!^)\\s*?,(?!\\s*$))|(?=\\s*?\\})",
			"endCaptures": {
				"1": {
					"name": "red1"
				}
			},
			"patterns": [
				{
					"include": "#values"
				}
			]
		},

		"value-string-triple-single-quote": {
			"begin": "(?<!')'''",
			"beginCaptures": {
				"0": {
					"name": "green1"
				}
			},
			"end": "'''(?!')",
			"endCaptures": {
				"0": {
					"name": "green2"
				}
			}
		}
		
	}
}